"use strict";module.exports=function(e){var r=require("q");if("undefined"==typeof e)var e={};var n=1274,i=9360,t={vendorId:n,productId:i},o={permissions:[{usbDevices:[t]}]};e.checkPermission=function(){var e=r.defer();return chrome.permissions.contains(o,function(r){r?e.resolve():e.reject()}),e.promise},e.requestPermission=function(){var e=r.defer();return chrome.permissions.request(o,function(r){r?e.resolve():e.reject()}),e.promise};var s,u;e.openDevice=function(){var e=r.defer();return chrome.usb.findDevices(t,function(r){r&&r.length>0?(s=r[0],chrome.usb.listInterfaces(s,function(r){u=r[0],p(),c().then(e.resolve)})):e.reject()}),e.promise};var c=function(){var e=r.defer();return chrome.usb.claimInterface(s,u.interfaceNumber,e.resolve),e.promise},f={interrupt:{},"in":{},out:{}},p=function(){u.endpoints.forEach(function(e){"in"==e.direction&&"interrupt"==e.type?f.interrupt=e:"in"==e.direction&&"bulk"==e.type?f["in"]=e:"out"==e.direction&&"bulk"==e.type&&(f.out=e)})};return e};